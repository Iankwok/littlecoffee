app.controller('shoppingcartCtrl', ['$scope', '$auth', '$http', function($scope, $auth, $http){

  $scope.deleteOrderDetail = deleteOrderDetail;

  $http({
    method: "GET",
    url: "http://localhost:3000/api/orders"
  }).then(function(data){
    $scope.orders = data.data;
    console.log(data.data);
  })

  function deleteOrderDetail(index){
    $http
    .delete("http://localhost:3000/api/orders/" + $scope.orders[index].order_detail_id)
    .then(function(data){
      $scope.orders.splice(index, 1);
    })
  }

  $scope.getTotal = function(){
    var total = 0;
    for(var i = 0; i < $scope.orders.length; i++){
        var orderdetail = $scope.orders[i];
        total += (orderdetail.price * orderdetail.quantity);
    }
    return total;
  }

}])